adapter driver cmsis-dap
cmsis_dap_vid_pid 0xcafe 0x4006
cmsis_dap_backend hid

transport select swd
adapter speed 1000
reset_config none

set _ENDIAN little
set _CHIPNAME 5312
set _CPUTAPID 0x411fd221
set _TARGETNAME $_CHIPNAME.m55

swd newdap $_CHIPNAME cpu -irlen 4 -expected-id $_CPUTAPID
dap create $_CHIPNAME.dap  -chain-position $_CHIPNAME.cpu -adiv6

$_CHIPNAME.dap apsel  0
$_CHIPNAME.dap apcsw default
target create $_TARGETNAME cortex_m -endian $_ENDIAN -dap $_CHIPNAME.dap -ap-num 0x00010000

$_TARGETNAME configure -event gdb-attach {
	halt
}

$_TARGETNAME configure -event gdb-detach {
	resume
	shutdown
}

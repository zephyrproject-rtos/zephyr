# Copyright (c) 2020 Linaro Limited
# SPDX-License-Identifier: Apache-2.0

description: |
    STM32F1 Pin controller Node
    Based on pincfg-node.yaml binding.

    Note: `bias-disable` and `drive-push-pull` are default pin configurations.
           They will be applied in case no `bias-foo` or `driver-bar` properties
           are set.

compatible: "st,stm32f1-pinctrl"

include: base.yaml

properties:
  reg:
    required: true

  swj-cfg:
    type: string
    default: "full" # reset state
    enum:
      - "full"
      - "no-njtrst"
      - "jtag-disable"
      - "disable"
    description: |
      Configures number of pins assigned to the SWJ debug port.

      * full         - Full SWJ (JTAG-DP + SW-DP).
      * no-njtrst    - Full SWJ (JTAG-DP + SW-DP) but without NJTRST.
                       Releases: PB4.
      * jtag-disable - JTAG-DP Disabled and SW-DP Enabled.
                       Releases: PA15 PB3 PB4.
      * disable      - JTAG-DP Disabled and SW-DP Disabled.
                       Releases: PA13 PA14 PA15 PB3 PB4.

      If absent, then Full SWJ (JTAG-DP + SW-DP) is used (reset state).

child-binding:
  description: |
      This binding gives a base representation of the STM32F1 pins
      configuration

  include:
    - name: pincfg-node.yaml
      property-allowlist:
        - bias-disable
        - bias-pull-down
        - bias-pull-up
        - drive-push-pull
        - drive-open-drain
        - output-low
        - output-high

  properties:
    pinmux:
      required: true
      type: int
      description: |
        Adapted from
        https://github.com/torvalds/linux/blob/master/Documentation/devicetree/bindings/pinctrl/st,stm32-pinctrl.yaml
        Integer represents gpio pin number and mux setting.
        Each integer encodes a port, line, alternate function and remap.
        Refer to STM32F1_PINMUX() for details about encoding in
        include/zephyr/dt-bindings/pinctrl/stm32f1-pinctrl.h

    slew-rate:
      type: string
      default: "max-speed-10mhz"
      enum:
        - "max-speed-10mhz"       # Default
        - "max-speed-2mhz"
        - "max-speed-50mhz"
      description: |
        Pin output mode, maximum achievable speed. Only applies to
        output mode (alternate).

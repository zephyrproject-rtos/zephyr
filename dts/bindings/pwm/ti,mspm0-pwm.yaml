# Copyright 2024 Linumiz
# SPDX-License-Identifier: Apache-2.0

description: |
  TI MSPM0 PWM node for MSPM0 SoCs. Each channel in MSPM0 can be configured
  to use for PWM operation. There are three PWM modes supported by this module.

  mspm0pwm: pwm {
    pwm_0 {
      ti,cc-index = <0>;
      ti,clk-prescaler = <255>;
      ti,clk-div = <1>;

      ti,cc-mode = "PULSE_WIDTH";
      ti,period = <62499>;

    };

    pwm_1 {
      ti,cc-index = <0>;
      ti,clk-prescaler = <255>;
      ti,clk-div = <1>;

      ti,pwm-mode = "EDGE_ALIGN";
      ti,pulse-cycle = <249>;
      ti,period = <1000>;
    };
  };

compatible: "ti,mspm0g1x0x_g3x0x-timer-pwm"

include: [pwm-controller.yaml, base.yaml, pinctrl-device.yaml]

properties:
  pinctrl-0:
    required: true

  pinctrl-names:
    required: true

  ti,advanced:
    type: boolean
    description: |
      Indicate as General Purpose Timer Advance (TIMA).

  ti,cc-index:
    type: int
    required: true
    description: |
      Capture input/Compare output index, should match with the pin function.

  ti,pwm-mode:
    type: string
    description: |
      Select PWM OUT mode:
      - EDGE_ALIGN: generate pulses with edge aligned down counting mode.

      - EDGE_ALIGN_UP:  generate pulses with edge aligned up counting mode.

      - CENTER_ALIGN: generates pulses center aligned up and down counting mode.

    enum:
      - "EDGE_ALIGN"
      - "EDGE_ALIGN_UP"
      - "CENTER_ALIGN"

  ti,cc-mode:
    type: string
    description: |
      Select input capture mode:
      - EDGE_TIME: capture edge time mode.

      - PULSE_WIDTH: capture pulse width and/or period mode.

    enum:
      - "EDGE_TIME"
      - "PULSE_WIDTH"

  ti,pulse-cycle:
    type: int
    description: |
      Duty-cycle in TIMCLK cycle for PWM out at boot time.

  ti,period:
    type: int
    required: true
    description: |
      Time period in TIMCLK cycle for Capture mode or PWM output.

  ti,clk-prescaler:
    type: int
    required: true
    description: |
      TIMCLK clock source prescaler value.
      Valid range [0 ... 255].

  ti,clk-div:
    type: int
    required: true
    description: |
      TIMCLK clock source divider.

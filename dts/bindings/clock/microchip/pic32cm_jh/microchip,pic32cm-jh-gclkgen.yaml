# Copyright (c) 2025 Microchip Technology Inc.
# SPDX-License-Identifier: Apache-2.0

title: PIC32CM_JH Generic clock generator

description: |
  The Generic Clock controller (GCLK) features 9 Generic Clock Generators 0..8 that can
  provide a wide range of clock frequencies.

include: [base.yaml]

compatible: "microchip,pic32cm-jh-gclkgen"

child-binding:
  properties:
    subsystem:
      type: int
      required: true
      description: |
        Clock subsystem

    gclkgen-div-factor:
      type: int
      default: 0
      description: |
        Represent a division value for the corresponding Generator. The actual division factor is
        dependent on the state of div-select (gclk1 0 - 65535, others 0 - 255)

    gclkgen-run-in-standby-en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: |
        Keep the Generator running in Standby as long as it is configured to output to a dedicated
        GCLK_IOn pin. If output is not configured to a pin, this field has no effect and the
        generator will only be running if a peripheral requires the clock.
        0: to disable, 1: to enable

    gclkgen-div-select:
      type: string
      enum:
        - "div-factor"
        - "div-factor-power"
      default: "div-factor"
      description: |
        The Generator clock frequency equals the clock source frequency divided by div-factor
        DIV_FACTOR_POWER: The Generator clock frequency equals the clock source frequency divided
        by 2^(N+1), where N is the div-factor

    gclkgen-pin-output-en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: |
        Generator clock output to the corresponding pin, if that pin is not configured as input
        source.
        0: to disable, 1: to enable

    gclkgen-pin-output-off-val:
      type: string
      enum:
        - "low"
        - "high"
      default: "low"
      description: |
        Output value of the corresponding pin, when the Generator is turned off or the output-en is
        false, as long as the pin is not source.

    gclkgen-improve-duty-cycle-en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: |
        Improve the duty cycle of the Generator output to 50/50 for odd division factors
        0: to disable, 1: to enable

    gclkgen-en:
      type: int
      enum:
        - 0
        - 1
      default: 0
      description: |
        Enable gclk generator
        0: to disable, 1: to enable

    gclkgen-src:
      type: string
      enum:
        - "xosc"
        - "gclk-pin"
        - "gclk1"
        - "osculp32k"
        - "osc32k"
        - "xosc32k"
        - "osc48m"
        - "fdpll"
      default: "xosc"
      description: |
        Generator source clock selection

    gclkgen-pin-src-freq:
      type: int
      default: 0
      description: |
        External input clock frequency of the pin, when used as source. (0 - 200000000)

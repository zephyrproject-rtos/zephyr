# Copyright (c) 2025 STMicroelectronics
# SPDX-License-Identifier: Apache-2.0

description: STM32H7R/S power controller

compatible: "st,stm32h7rs-pwr"

include: "st,stm32-pwr.yaml"

properties:
  power-supply:
    type: string
    required: true
    description: |
      Power supply configuration

      This property specifies the voltage regulators configuration
      and indicates how the core domain voltage (Vcore) is generated.
      Refer to your product's Datasheet and Reference Manual for details.

      WARNING: If this property's value does not match the target board's
      hardware configuration, the product will deadlock during boot which
      prevents debugging or re-programming. If such a situation occurs,
      configure the product to start execution in System memory instead
      then erase the firmware with incorrect configuration.

      WARNING: The so-called "cascade" mode where SMPS powers the LDO
      is NOT supported on STM32H7R/S series, unlike STM32H7 series!


      ldo: LDO supply
        The LDO is enabled and generates Vcore; the SMPS is disabled.

      external-source: Bypass
        An external supply provides Vcore; SMPS and LDO are disabled.

      smps-direct: Direct SMPS supply
        The SMPS is enabled and generates Vcore; the LDO is disabled.

      smps-ext-ldo: External SMPS supply, LDO supply
        The LDO is enabled and generates Vcore from VddLDO.
        Independentely, the SMPS is also enabled and generates
        a 1.8V supply for external devices.

      smps-ext-bypass: External SMPS supply and bypass
        The SMPS is enabled and generates a 1.8V supply for external devices.
        Vcore is provided directly by an external supply; LDO is disabled.
    enum:
      - "ldo"
      - "external-source"
      - "smps-direct"
      - "smps-ext-ldo"
      - "smps-ext-bypass"

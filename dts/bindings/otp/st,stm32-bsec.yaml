# Copyright (c) 2025 STMicroelectronics
# SPDX-License-Identifier: Apache-2.0

title: STMicroelectronics Boot and security control peripheral

description: |
  The boot and security control (BSEC) peripheral manages the accesses to an
  embedded one time programmable (OTP) array of fuses. Those fuses are used to
  store on-chip, non-volatile data like boot and security parameters.
  Embedded non-volatile secrets are stored in BSEC upper area that is only
  accessible while BSEC is operating in its BSEC-closed state. When the BSEC
  state is BSEC-open, those non-volatile secrets are permanently hidden.

  Configuration example at SoC level:

  bsec: efuse@56009000 {
    compatible = "st,stm32-bsec";
    reg = <0x56009000 0x1000>;
    st,upper-fuse-limit = <256>;

    nvmem-layout {
      compatible = "fixed-layout";
      #address-cells = <1>;
      #size-cells = <1>;

      mac_address0: mac-address@2d8 {
        reg = <0x2d8 0x6>;
        #nvmem-cell-cells = <0>;
      };

      mac_address1: mac-address@2ac {
        reg = <0x2ac 0x6>;
        #nvmem-cell-cells = <0>;
      };
    };
  };

compatible: "st,stm32-bsec"

include: base.yaml

properties:
  st,upper-fuse-limit:
    type: int
    required: true
    description: |
      This property is used to indicate the limit of the upper fuse region of
      the BSEC. This upper fuse area has particular requirements for the SoC
      state for its access. This property represents a fuse(OTP word) index.

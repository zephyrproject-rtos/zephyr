/*
 * Copyright (c) 2017 Piotr Mienkowski
 * Copyright (c) 2017 Justin Watson
 *
 * SPDX-License-Identifier: Apache-2.0
 */

#include <atmel/sams70.dtsi>
#include <atmel/samx7x-pinctrl.dtsi>

/ {
	soc {

		gmac: ethernet@40050000 {
			compatible = "atmel,sam-gmac";
			reg = <0x40050000 0x4000>;
			peripheral-id = <39>;
			interrupts = <39 0>, <66 0>, <67 0>;
			interrupt-names = "gmac", "q1", "q2";
			num-queues = <3>;
			local-mac-address = [00 00 00 00 00 00];
			label = "GMAC";
			status = "disabled";
			/* Default to RMII config */
			pinctrl-0 = <&pd0a_gmac_gtxck &pd1a_gmac_gtxen
				     &pd2a_gmac_gtx0 &pd3a_gmac_gtx1
				     &pd4a_gmac_grxdv &pd5a_gmac_grx0
				     &pd6a_gmac_grx1 &pd7a_gmac_grxer>;

			mdio: mdio {
				compatible = "atmel,sam-mdio";
				label = "MDIO";
				status = "disabled";
				pinctrl-0 = <&pd8a_gmac_gmdc &pd9a_gmac_gmdio>;
			};
		};

		can {
			compatible = "bosch,m-can-base";
			#address-cells = <1>;
			#size-cells = <1>;
			std-filter-elements = <28>;
			ext-filter-elements = <8>;
			rx-fifo0-elements = <3>;
			rx-fifo1-elements = <3>;
			rx-buffer-elements = <0>;
			tx-buffer-elements = <1>;

			can0: can@40030000 {
				compatible = "atmel,sam-can";
				#address-cells = <1>;
				#size-cells = <0>;
				reg = <0x40030000 0x100>;
				reg-names = "m_can";
				interrupts = <35 0>, <36 0>;
				interrupt-names = "LINE_0", "LINE_1";
				peripheral-id = <35>;
				status = "disabled";
				label = "CAN_0";
			};

			can1: can@40034000 {
				compatible = "atmel,sam-can";
				#address-cells = <1>;
				#size-cells = <0>;
				reg = <0x40034000 0x100>;
				reg-names = "m_can";
				interrupts = <37 0>, <38 0>;
				interrupt-names = "LINE_0", "LINE_1";
				peripheral-id = <37>;
				status = "disabled";
				label = "CAN_1";
			};
		};
	};
};

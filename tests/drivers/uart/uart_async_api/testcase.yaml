common:
  platform_exclude: seeeduino_xiao serpente arduino_nano_33_iot atsamr21_xpro
    adafruit_itsybitsy_m4_express atsame54_xpro atsamd21_xpro adafruit_trinket_m0
    arduino_nano_33_iot arduino_zero atsamd21_xpro adafruit_feather_m0_basic_proto

tests:
  drivers.uart.uart_async_api:
    tags: drivers
    filter: CONFIG_UART_CONSOLE and CONFIG_SERIAL_SUPPORT_ASYNC
    harness: ztest
    harness_config:
      fixture: gpio_loopback
  drivers.uart.uart_async_api.rtt:
    tags: drivers
    filter: CONFIG_UART_CONSOLE and CONFIG_SERIAL_SUPPORT_ASYNC and CONFIG_HAS_SEGGER_RTT
    extra_args: DTC_OVERLAY_FILE=boards/segger_rtt.overlay
    extra_configs:
      - CONFIG_USE_SEGGER_RTT=y
      - CONFIG_UART_RTT=y
    build_only: true
  drivers.uart.uart_async_api.noclock:
    tags: drivers
    filter: CONFIG_UART_CONSOLE and CONFIG_SERIAL_SUPPORT_ASYNC
    harness: ztest
    harness_config:
      fixture: gpio_loopback
    extra_configs:
      - CONFIG_SYS_CLOCK_EXISTS=n
    platform_allow: nrf52840dk_nrf52840 nrf9160dk_nrf9160 nrf51dk_nrf51422

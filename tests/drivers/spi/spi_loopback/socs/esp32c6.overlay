/*
 * Copyright (c) 2022 Kumar Gala <galak@kernel.org>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

&pinctrl {
	spim2_loopback: spim2_loopback {
		group1 {
			pinmux = <SPIM2_MISO_GPIO2>;
			output-enable; /* Connect GPIO2 and GPIO3 externally for testing */
		};
		group2 {
			pinmux = <SPIM2_MOSI_GPIO3>;
			input-enable; /* Connect GPIO2 and GPIO3 externally for testing */
		};
		group3 {
			pinmux = <SPIM2_SCLK_GPIO6>,
				<SPIM2_CSEL_GPIO10>;
		};
	};
};

&spi2 {
	slow@0 {
		compatible = "test-spi-loopback-slow";
		reg = <0>;
		spi-max-frequency = <500000>;
	};
	fast@0 {
		compatible = "test-spi-loopback-fast";
		reg = <0>;
		spi-max-frequency = <16000000>;
	};
};

&spi2 {
	#address-cells = <1>;
	#size-cells = <0>;
	dma-enabled;
	pinctrl-0 = <&spim2_loopback>;
	pinctrl-names = "default";
	status = "okay";
};

# SPDX-FileCopyrightText: Copyright (c) 2024 Jilay Sandeep Pandya
# SPDX-License-Identifier: Apache-2.0

common:
  tags:
    - drivers
    - stepper
    - api
tests:
  drivers.stepper.stepper_api.gpio_step_dir:
    extra_args:
      - platform:native_sim/native/64:DTC_OVERLAY_FILE="boards/native_sim_gpio_step_dir.overlay"
    extra_configs:
      - CONFIG_GPIO=y
      - CONFIG_COUNTER=y
      - CONFIG_STEPPER_GPIO_STEPPER_GENERATE_ISR_SAFE_EVENTS=y
    platform_allow:
      - native_sim/native/64
  drivers.stepper.stepper_api.gpio_step_dir_work_q:
    extra_args:
      - platform:native_sim/native/64:DTC_OVERLAY_FILE="boards/native_sim_gpio_step_dir_workq.overlay"
    extra_configs:
      - CONFIG_GPIO=y
      - CONFIG_STEPPER_TEST_TIMING_TIMEOUT_TOLERANCE_PCT=130
    platform_allow:
      - native_sim/native/64
  drivers.stepper.stepper_api.h_bridge_stepper:
    extra_args:
      - platform:native_sim/native/64:DTC_OVERLAY_FILE="boards/native_sim_h_bridge_stepper.overlay"
    extra_configs:
      - CONFIG_GPIO=y
      - CONFIG_COUNTER=y
      - CONFIG_STEPPER_GPIO_STEPPER_GENERATE_ISR_SAFE_EVENTS=y
    platform_allow:
      - native_sim/native/64
  drivers.stepper.stepper_api.h_bridge_stepper_work_q:
    extra_args:
      - platform:native_sim/native/64:DTC_OVERLAY_FILE="boards/native_sim_h_bridge_stepper_workq.overlay"
    extra_configs:
      - CONFIG_GPIO=y
      - CONFIG_STEPPER_TEST_TIMING_TIMEOUT_TOLERANCE_PCT=130
    platform_allow:
      - native_sim/native/64

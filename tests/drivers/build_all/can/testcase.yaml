common:
  build_only: true
  tags:
    - drivers
    - can
tests:
  drivers.can.build_all.mcp2515:
    depends_on:
      - arduino_spi
      - arduino_gpio
    extra_args: SHIELD=dfrobot_can_bus_v2_0
    platform_allow: frdm_k64f
  drivers.can.build_all.mcp2515.mikrobus:
    extra_args: SHIELD=mikroe_mcp25625_click
    platform_allow: lpcxpresso55s28
  drivers.can.build_all.mcp2515.pico:
    depends_on:
      - pico_spi
      - pico_gpio
    extra_args: SHIELD=waveshare_pico_can_b
    platform_allow:
      - pico_plus2/rp2350b/hazard3
      - pico_plus2/rp2350b/m33
      - rp2040_plus
      - rpi_pico
      - rpi_pico/rp2040/w
      - rpi_pico/rp2040/w/mcuboot
      - rpi_pico/rp2040/mcuboot
      - rpi_pico2/rp2350a/hazard3
      - rpi_pico2/rp2350a/m33
      - rpi_pico2/rp2350a/m33/w
      - rpi_pico2/rp2350a/m33/w/mcuboot
      - rpi_pico2/rp2350a/m33/mcuboot
      - w5500_evb_pico
      - w5500_evb_pico2/rp2350a/m33
  drivers.can.build_all.mcp2515.xiao:
    depends_on:
      - xiao_spi
      - xiao_gpio
    extra_args:
      - SHIELD=seeed_xiao_can
      # Avoiding hidden Kconfig warnings, as the Zephyr console on the XIAO
      # serial interface was disabled by the shield due to signal conflicts
      # on SPI CS (RX) and INT (TX).
      - CONFIG_SERIAL=n
      - CONFIG_CONSOLE=n
      - CONFIG_UART_CONSOLE=n
      - CONFIG_UART_INTERRUPT_DRIVEN=n
    platform_allow:
      - seeeduino_xiao
      - xiao_ble
      - xiao_rp2040
  drivers.can.build_all.tcan4x5x:
    depends_on:
      - arduino_spi
      - arduino_gpio
    extra_args: SHIELD=tcan4550evm
    platform_allow: frdm_k64f
  drivers.can.build_all.tcan4x5x.mikrobus:
    extra_args: SHIELD=mikroe_can_fd_6_click
    platform_allow: mikroe_stm32_m4_clicker
  drivers.can.build_all.mcp251xfd:
    extra_args: SHIELD=mikroe_mcp2518fd_click
    platform_allow: lpcxpresso55s28
  drivers.can.build_all.native_linux:
    platform_allow:
      - native_sim
      - native_sim/native/64

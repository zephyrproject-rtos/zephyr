common:
  # Only used for compile testing so it is enough to use one platform here.
  build_only: true
  min_ram: 32
  tags:
    - net
    - net-all
tests:
  net.build:
    platform_allow: qemu_x86
    extra_configs:
      - CONFIG_NET_TC_THREAD_COOPERATIVE=y
  net.build.preempt:
    platform_allow: qemu_x86
    extra_configs:
      - CONFIG_NET_TC_THREAD_PREEMPTIVE=y
  net.build.no_compat_namespacing:
    platform_allow: qemu_x86
    extra_configs:
      - CONFIG_NET_NAMESPACE_COMPAT_MODE=n
      - CONFIG_POSIX_API=n
  net.build.compat_namespacing:
    platform_allow: qemu_x86
    extra_configs:
      - CONFIG_NET_NAMESPACE_COMPAT_MODE=y
  # Compile test CANBUS
  net.build.no_compat_namespacing_canbus:
    platform_allow: qemu_x86
    tags: can
    depends_on: can
    extra_configs:
      - CONFIG_NET_NAMESPACE_COMPAT_MODE=n
      - CONFIG_POSIX_API=n
      - CONFIG_NET_CANBUS=y
      - CONFIG_CAN=y
      - CONFIG_NET_SOCKETS_CAN=y
      - CONFIG_NET_L2_IEEE802154=n
  # Compile test OpenThread
  net.build.no_compat_namespacing_openthread:
    tags:
      - net
      - openthread
    depends_on: openthread
    platform_allow:
      - frdm_rw612
    extra_configs:
      - CONFIG_NET_NAMESPACE_COMPAT_MODE=n
      - CONFIG_POSIX_API=n
      - CONFIG_NET_L2_OPENTHREAD=y
      - CONFIG_CPP=y
      - CONFIG_NET_SLIP_TAP=n
      - CONFIG_NET_QEMU_SLIP=n
      - CONFIG_LWM2M_RESOURCE_DATA_CACHE_SUPPORT=n
      - CONFIG_LWM2M_RW_JSON_SUPPORT=n
      - CONFIG_USERSPACE=y
      - CONFIG_NXP_MONOLITHIC_NBU=n
      - CONFIG_NXP_MONOLITHIC_WIFI=n
      - CONFIG_NVS=y
      - CONFIG_NXP_RF_IMU=y
      - CONFIG_NXP_FW_LOADER=y
      - CONFIG_HDLC_RCP_IF=y
      - CONFIG_OPENTHREAD_MANUAL_START=y
      - CONFIG_OPENTHREAD_ZEPHYR_BORDER_ROUTER=y
      - CONFIG_OPENTHREAD_RCP_RESTORATION_MAX_COUNT=10
      - CONFIG_OPENTHREAD_ZEPHYR_BORDER_ROUTER_VENDOR_NAME="Zephyr"
      - CONFIG_OPENTHREAD_ZEPHYR_BORDER_ROUTER_BASE_SERVICE_NAME="Zephyr-BorderRouter"
      - CONFIG_OPENTHREAD_BACKBONE_ROUTER_MULTICAST_ROUTING=y
      - CONFIG_OPENTHREAD_SLAAC=y
      - CONFIG_OPENTHREAD_ENABLE_SERVICE=y
      - CONFIG_OPENTHREAD_BORDER_ROUTER=y
      - CONFIG_OPENTHREAD_BORDER_ROUTING=y
      - CONFIG_OPENTHREAD_BORDER_ROUTING_COUNTERS=y
      - CONFIG_OPENTHREAD_BORDER_AGENT=y
      - CONFIG_OPENTHREAD_BORDER_AGENT_ID=y
      - CONFIG_OPENTHREAD_NETDATA_PUBLISHER=y
      - CONFIG_OPENTHREAD_BACKBONE_ROUTER=y
      - CONFIG_OPENTHREAD_NAT64_TRANSLATOR=y
      - CONFIG_OPENTHREAD_NAT64_BORDER_ROUTING=y
      - CONFIG_OPENTHREAD_DNSSD_SERVER=y
      - CONFIG_OPENTHREAD_EXTERNAL_HEAP=y
      - CONFIG_OPENTHREAD_JOINER=y
      - CONFIG_OPENTHREAD_COMMISSIONER=y
      - CONFIG_OPENTHREAD_PLATFORM_UDP=y
      - CONFIG_OPENTHREAD_MULTICAST_DNS=y
      - CONFIG_OPENTHREAD_MAX_STATECHANGE_HANDLERS=3
      - CONFIG_OPENTHREAD_INTERFACE_EARLY_UP=y
      - CONFIG_OPENTHREAD_ECDSA=y
      - CONFIG_OPENTHREAD_IP6_FRAGM=y
      - CONFIG_OPENTHREAD_COAP=y
      - CONFIG_OPENTHREAD_SETTINGS_RAM=y
      - CONFIG_OPENTHREAD_BORDER_AGENT_EPHEMERAL_KEY_ENABLE=y
      - CONFIG_OPENTHREAD_VERHOEFF_CHECKSUM=y
      - CONFIG_OPENTHREAD_BORDER_AGENT_MESHCOP_SERVICE=y
      - CONFIG_OPENTHREAD_TREL=y
      - CONFIG_OPENTHREAD_TREL_MANAGE_DNSSD=y
      - CONFIG_OPENTHREAD_BORDER_ROUTING_DHCP6_PD=y
      - CONFIG_OPENTHREAD_BORDER_ROUTING_DHCP6_PD_CLIENT=y
      - CONFIG_OPENTHREAD_DHCP6_CLIENT=y
      - CONFIG_OPENTHREAD_DHCP6_SERVER=y
      - CONFIG_OPENTHREAD_DNS_UPSTREAM_QUERY=y
      - CONFIG_OPENTHREAD_SRP_CLIENT=y
      - CONFIG_OPENTHREAD_SRP_SERVER=y
      - CONFIG_OPENTHREAD_SRP_ADV_PROXY=y
      - CONFIG_OPENTHREAD_DNSSD_DISCOVERY_PROXY=y
      - CONFIG_OPENTHREAD_PING_SENDER=y
      - CONFIG_OPENTHREAD_LINK_METRICS_INITIATOR=y
      - CONFIG_OPENTHREAD_DUA=y
      - CONFIG_OPENTHREAD_MLR=y
      - CONFIG_OPENTHREAD_DNS_CLIENT=y
      - CONFIG_OPENTHREAD_DNS_CLIENT_OVER_TCP=y
      - CONFIG_OPENTHREAD_TCP_ENABLE=y
      - CONFIG_OPENTHREAD_NETDIAG_VENDOR_INFO=y
      - CONFIG_OPENTHREAD_LINK_METRICS_SUBJECT=y
      - CONFIG_OPENTHREAD_LINK_METRICS_MANAGER=y
      - CONFIG_OPENTHREAD_LINK_METRICS_INITIATOR=y
      - CONFIG_OPENTHREAD_MAC_FILTER=y
      - CONFIG_NET_SOCKETS_INET_RAW=y
      - CONFIG_OPENTHREAD_THREAD_VERSION_1_4=y
      - CONFIG_NET_IPV6_PE=n
      - CONFIG_NET_L2_IEEE802154=n
      - CONFIG_NET_ROUTE_MCAST=y
      - CONFIG_OPENTHREAD_SHELL=y
      - CONFIG_DNS_RESOLVER_PACKET_FORWARDING=y

common:
  tags: zms
tests:
  keyvalstorage.zms:
    platform_allow:
      - qemu_x86
  keyvalstorage.zms.0x00:
    extra_args: DTC_OVERLAY_FILE=boards/qemu_x86_ev_0x00.overlay
    platform_allow: qemu_x86
  keyvalstorage.zms.sim.no_erase:
    extra_configs:
      - CONFIG_FLASH_SIMULATOR_EXPLICIT_ERASE=n
    platform_allow: qemu_x86
  keyvalstorage.zms.sim.corrupt_close:
    extra_configs:
      - CONFIG_FLASH_SIMULATOR_EXPLICIT_ERASE=y
      - CONFIG_FLASH_SIMULATOR_DOUBLE_WRITES=y
    platform_allow: qemu_x86
  keyvalstorage.zms.cache:
    extra_configs:
      - CONFIG_ZMS_LOOKUP_CACHE=y
      - CONFIG_ZMS_LOOKUP_CACHE_SIZE=64
    platform_allow: native_sim
  keyvalstorage.zms.data_crc:
    extra_configs:
      - CONFIG_ZMS_DATA_CRC=y
    platform_allow:
      - native_sim
      - qemu_x86
  keyvalstorage.zms.no_double_write:
    extra_configs:
      - CONFIG_ZMS_NO_DOUBLE_WRITE=y
    platform_allow:
      - native_sim
      - qemu_x86
  keyvalstorage.zms.no_double_write_cache:
    extra_configs:
      - CONFIG_ZMS_NO_DOUBLE_WRITE=y
      - CONFIG_ZMS_LOOKUP_CACHE=y
      - CONFIG_ZMS_LOOKUP_CACHE_SIZE=64
    platform_allow:
      - native_sim
      - qemu_x86
  keyvalstorage.zms.id_64bit:
    extra_configs:
      - CONFIG_ZMS_ID_64BIT=y
      - CONFIG_ZMS_LOOKUP_CACHE=y
      - CONFIG_ZMS_LOOKUP_CACHE_SIZE=64
    platform_allow: qemu_x86

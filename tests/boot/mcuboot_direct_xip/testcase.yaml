#
# Copyright (c) 2026 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: Apache-2.0
#

common:
  sysbuild: true
  timeout: 10
  harness: console
  platform_allow:
    - nrf52840dk/nrf52840
  integration_platforms:
    - nrf52840dk/nrf52840
  tags:
    - mcuboot
    - sysbuild
tests:
  bootloader.mcuboot.direct.xip:
    harness_config:
      type: multi_line
      regex:
        - "Starting Direct-XIP bootloader"
        - "Primary slot: version=0.0.0\\+0"
        - "Secondary slot: version=0.0.0\\+0"
        - "Image 0 loaded from the primary slot"
        - "Bootloader chainload address offset"
        - "Image version: v0.0.0"
        - "Jumping to the image slot"
        - "Hello World"
  bootloader.mcuboot.direct.xip.slot1.only:
    extra_args:
      - SB_CONFIG_SLOT0_IMAGE_BUILD_ONLY=y
    harness_config:
      type: multi_line
      regex:
        - "Starting Direct-XIP bootloader"
        - "Image 0 Primary slot: Image not found"
        - "Secondary slot: version=0.0.0\\+0"
        - "Image 0 loaded from the secondary slot"
        - "Bootloader chainload address offset"
        - "Image version: v0.0.0"
        - "Jumping to the image slot"
        - "Hello World"

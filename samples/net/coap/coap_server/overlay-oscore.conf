# OSCORE Support
CONFIG_COAP_OSCORE=y
CONFIG_UOSCORE=y
CONFIG_PSA_CRYPTO=y
CONFIG_PSA_WANT_ALG_CCM=y
CONFIG_PSA_WANT_ALG_HKDF=y
CONFIG_PSA_WANT_ALG_SHA_256=y
CONFIG_PSA_WANT_KEY_TYPE_AES=y
CONFIG_PSA_WANT_KEY_TYPE_HMAC=y
CONFIG_PSA_WANT_KEY_TYPE_RAW_DATA=y
CONFIG_MBEDTLS_PSA_CRYPTO_C=y

# ZCBOR for OSCORE
CONFIG_ZCBOR=y
CONFIG_ZCBOR_CANONICAL=y

# Enhanced logging for debugging
CONFIG_LOG=y
CONFIG_COAP_LOG_LEVEL_DBG=y
CONFIG_NET_LOG=y

# Increase heap for OSCORE
CONFIG_HEAP_MEM_POOL_SIZE=8192

# OSCORE Configuration
CONFIG_COAP_OSCORE_MAX_PLAINTEXT_LEN=1024
CONFIG_COAP_OSCORE_EXCHANGE_CACHE_SIZE=8
CONFIG_COAP_OSCORE_EXCHANGE_LIFETIME_MS=60000

# Increase network buffer sizes for OSCORE
CONFIG_NET_BUF_DATA_SIZE=256
CONFIG_NET_PKT_RX_COUNT=16
CONFIG_NET_PKT_TX_COUNT=16
CONFIG_NET_BUF_RX_COUNT=32
CONFIG_NET_BUF_TX_COUNT=32

# More stack for OSCORE operations
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_NET_TX_STACK_SIZE=2048
CONFIG_NET_RX_STACK_SIZE=2048

# Disable deferred logging to avoid stack overflow in logging thread
# The uOSCORE library functions use ~3.3KB of stack, which causes
# issues when log messages are processed in the separate logging thread
CONFIG_LOG_MODE_DEFERRED=n
CONFIG_LOG_MODE_IMMEDIATE=y

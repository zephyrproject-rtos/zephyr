sample:
  description: UART echo demonstrating RISC-V AIA (APLIC + IMSIC) in SMP configuration
  name: UART Echo AIA SMP

common:
  tags:
    - riscv
    - interrupt
    - smp
  integration_platforms:
    - qemu_riscv32/qemu_virt_riscv32_aia/smp
  harness: console
  harness_config:
    type: multi_line
    regex:
      - "Hart 0: IRQ .* enabled"
      - "Hart 1: EIID .* enabled"

tests:
  sample.drivers.uart_echo_aia_smp:
    tags:
      - riscv
      - interrupt
      - smp
    depends_on:
      - smp
    filter: >
      (CONFIG_MP_MAX_NUM_CPUS > 1) and
      CONFIG_RISCV_APLIC_MSI and
      CONFIG_RISCV_IMSIC

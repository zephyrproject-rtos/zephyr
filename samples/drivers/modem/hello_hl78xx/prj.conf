# Sierra Wireless HL78XX Sample configuration

# Copyright (c) 2025 Netfeasa Ltd.
# SPDX-License-Identifier: Apache-2.0

# The HL78xx driver gets its IP settings from the cell network

# ============================================================================
# System Configuration
# ============================================================================
CONFIG_HEAP_MEM_POOL_SIZE=4096
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096

# ============================================================================
# Power Management (Optional)
# ============================================================================
# CONFIG_PM_DEVICE=y

# ============================================================================
# UART Configuration
# ============================================================================
CONFIG_UART_ASYNC_API=y
# CONFIG_UART_INTERRUPT_DRIVEN=y
# CONFIG_MODEM_BACKEND_UART_ASYNC_HWFC=y

# ============================================================================
# Networking Stack
# ============================================================================
CONFIG_NETWORKING=y
CONFIG_NET_UDP=y
CONFIG_NET_TCP=y
CONFIG_NET_IPV6=n
CONFIG_NET_IPV4=y
CONFIG_NET_SOCKETS=y
# DNS
CONFIG_DNS_RESOLVER=y
CONFIG_NET_SOCKETS_DNS_TIMEOUT=12000
# Wait for the network to be ready
CONFIG_NET_SAMPLE_COMMON_WAIT_DNS_SERVER_ADDITION=y
# Network management
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y
# NB-IoT has large latency, so increase timeouts. It is ok to use this for Cat-M1 as well.
CONFIG_NET_SOCKETS_CONNECT_TIMEOUT=15000
CONFIG_NET_CONNECTION_MANAGER=y
# Network buffers
CONFIG_NET_PKT_RX_COUNT=32
CONFIG_NET_PKT_TX_COUNT=16
CONFIG_NET_BUF_RX_COUNT=64
CONFIG_NET_BUF_TX_COUNT=32

# ============================================================================
# Modem Driver - HL78XX
# ============================================================================
CONFIG_MODEM=y
#hl78xx modem
CONFIG_MODEM_HL78XX=y
# Statistics
CONFIG_MODEM_STATS=y

# ============================================================================
# Auto Baud Rate Detection and Switching
# ============================================================================
CONFIG_MODEM_HL78XX_AUTO_BAUDRATE=y
# CONFIG_MODEM_HL78XX_AUTOBAUD_AT_BOOT=y
# CONFIG_MODEM_HL78XX_AUTOBAUD_ONLY_IF_COMMS_FAIL=n
# CONFIG_MODEM_HL78XX_TARGET_BAUDRATE_9600=y
# CONFIG_MODEM_HL78XX_TARGET_BAUDRATE_115200=y
CONFIG_MODEM_HL78XX_TARGET_BAUDRATE_921600=y
CONFIG_MODEM_HL78XX_AUTOBAUD_DETECTION_BAUDRATES="9600,115200,921600,57600,38400,19200"
CONFIG_MODEM_HL78XX_AUTOBAUD_TIMEOUT=4
CONFIG_MODEM_HL78XX_AUTOBAUD_RETRY_COUNT=3
# After enabling auto-baud once WITH CONFIG_MODEM_HL78XX_AUTOBAUD_CHANGE_PERSISTENT,
# the modem's baud rate is saved to NV-MEM with AT&W, so it persists across power cycles.
# If you later disable CONFIG_MODEM_HL78XX_AUTO_BAUDRATE, the driver won't detect/switch,
# but the modem is still at the target baud rate (e.g., 921600)
# If your device tree UART is at 115200 but the modem is at 921600, communication will fail
# CONFIG_MODEM_HL78XX_AUTOBAUD_CHANGE_PERSISTENT=n
# CONFIG_MODEM_HL78XX_AUTOBAUD_START_WITH_TARGET_BAUDRATE=n

# ============================================================================
# APN Configuration (Disabled - using defaults)
# ============================================================================
# CONFIG_MODEM_HL78XX_APN_SOURCE_KCONFIG=y
# CONFIG_MODEM_HL78XX_APN="internet"
# CONFIG_MODEM_HL78XX_APN_SOURCE_ICCID=y
# CONFIG_MODEM_HL78XX_APN_PROFILES="hologram=23450, wm=20601, vodafone=8988239, em=8988303"

# ============================================================================
# Radio Access Technology (RAT) Configuration
# ============================================================================
CONFIG_MODEM_HL78XX_AUTORAT=n
# CONFIG_MODEM_HL78XX_AUTORAT_PRL_PROFILES="2,1,3"
# CONFIG_MODEM_HL78XX_AUTORAT_NB_BAND_CFG="3,8,20,28"
# CONFIG_MODEM_HL78XX_RAT_NB1=y
# CONFIG_MODEM_HL78XX_RAT_GSM=y

# Stay in boot mode until registered to a network
# CONFIG_MODEM_HL78XX_STAY_IN_BOOT_MODE_FOR_ROAMING=y

# ============================================================================
# AirVantage Over-The-Air (OTA) Support
# ============================================================================
CONFIG_MODEM_HL78XX_AIRVANTAGE=y
CONFIG_MODEM_HL78XX_AIRVANTAGE_USER_AGREEMENT=y
CONFIG_MODEM_HL78XX_AIRVANTAGE_UA_CONNECT_AIRVANTAGE=y
CONFIG_MODEM_HL78XX_AIRVANTAGE_UA_DOWNLOAD_FIRMWARE=y
CONFIG_MODEM_HL78XX_AIRVANTAGE_UA_INSTALL_FIRMWARE=y

# ============================================================================
# Shell and Debug Tools
# ============================================================================
CONFIG_SHELL=y
CONFIG_MODEM_HL78XX_AT_SHELL=y
CONFIG_MODEM_AT_SHELL_COMMAND_MAX_SIZE=256

# ============================================================================
# Event Monitoring
# ============================================================================
CONFIG_HL78XX_EVT_MONITOR=y

# ============================================================================
# Logging
# ============================================================================
CONFIG_LOG=y

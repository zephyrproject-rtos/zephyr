sample:
  description: CPU frequency scaling sample
  name: CPU Freq Sample
common:
  integration_platforms:
    - native_sim
    - native_sim/native/64
  tags: cpu_freq
tests:
  sample.cpu_freq:
    platform_allow:
      - native_sim
      - native_sim/native/64
    harness: console
    harness_config:
      type: multi_line
      regex:
        - "^.*<inf> cpu_freq_sample: Starting CPU Freq Subsystem Sample!"
        - "^.*<dbg> cpu_load_metric: cpu_load_get: Execution cycles: [0-9]+, Total cycles: [0-9]+"
        - "^.*<dbg> cpu_freq_policy_on_demand: cpu_freq_policy_select_pstate: Current CPU Load: \
           [0-9]+%"
        - "^.*<dbg> cpu_freq_policy_on_demand: cpu_freq_policy_select_pstate: On-Demand Policy: \
           Selected P-state [0-9]+ with load_threshold=[0-9]+%"

sample:
  description: Sample application to test ESP32 deep-sleep mode
  name: ESP32 Deep-sleep
tests:
  sample.esp32.deep_sleep.build_only:
    build_only: true
    platform_allow:
      - esp32_devkitc/esp32/procpu
      - esp32s3_devkitm/esp32s3/procpu
      - esp32s2_devkitc
      - esp32c3_devkitm
      - esp32c6_devkitc/esp32c6/hpcore
      - esp8684_devkitm
  sample.esp32.deep_sleep.dut:
    extra_args:
      - CONFIG_EXAMPLE_EXT1_WAKEUP=n
      - CONFIG_EXAMPLE_GPIO_WAKEUP=n
      - CONFIG_EXAMPLE_WAKEUP_TIME_SEC=1
      - CONFIG_ESP32_USE_UNSUPPORTED_REVISION=y
    platform_allow:
      - esp32_devkitc/esp32/procpu
      - esp32s3_devkitm/esp32s3/procpu
      - esp32s2_devkitc
      - esp32c3_devkitm
      - esp32c6_devkitc/esp32c6/hpcore
      - esp8684_devkitm
    tags: esp32
    harness: console
    harness_config:
      type: multi_line
      regex:
        - "Powering off"
        - "Wake up from timer"
